################################################################
#
#	arch folder Make script
#
#	File:	Makefile
#	Date:	28 Jun 2020
#
#	Copyright (c) 2017 - 2020, Igor Baklykov
#	All rights reserved.
#
#


export	IGROS_DIR_BUILD		= $(CURDIR)/../build
export	IGROS_DIR_RELEASE	= $(CURDIR)/../release
export	IGROS_ARCH		?= i386

export	CXX			?= g++
export	CXXFLAGS		= -std=c++17				\
				  -Wall					\
				  -Wextra				\
				  -w					\
				  -pedantic				\
				  -Werror				\
				  -ffreestanding			\
				  -fno-exceptions			\
				  -fno-rtti				\
				  -nostdlib				\
				  -fno-pic				\
				  -fno-pie				\
				  -O3					\
				  -s					\
				  -mno-3dnow				\
				  -mno-sse				\
				  -mno-sse2				\
				  -mno-sse3				\
				  -mno-mmx				\
				  -DIGROS_ARCH_$(IGROS_ARCH)		\
				  -DIGROS_ARCH="\"$(IGROS_ARCH)"\"	\
				  -m64					\
				  -march=x86-64				\
				  -mno-red-zone				\
				  -mcmodel=large


#########################################################
#
#	Assambler configuration
#
# Assambler
export AS		= as
# Assambler flags
export ASFLAGS		= --64


#########################################################
#
#	Linker configuration
#
# Linker
export LD		= ld
# Linker flags
export LDFLAGS		= -n					\
			  -m elf_$(IGROS_ARCH)			\
			  -z max-page-size=0x1000

